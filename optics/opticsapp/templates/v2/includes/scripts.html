
{% load static %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<!-- CoreUI and necessary plugins-->
<script defer src="{% get_static_prefix %}assets/vendors/@coreui/coreui/js/coreui.bundle.min.js"></script>
<!--[if IE]><!-->
<script defer src="{% get_static_prefix %}assets/vendors/@coreui/icons/js/svgxuse.min.js"></script>
<script src="{% static 'js/htmx/htmx.min.js' %}"></script>
<script src="{% static 'js/htmx/ext/event-header.js' %}"></script>

<script>
    document.getElementById('id_airframe').addEventListener('change', function () {
            var airframe_id = this.value;
            var url = "{% url 'get_callsigns' airframe_id %}";
            fetch(url)
            .then(response => response.json())
            .then(data => {
                var select = document.getElementById('id_callsign');
                // clear the dropdown
                select.innerHTML = '';
                // create a default option
                var defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.text = '--- Select Callsign ---';
                select.appendChild(defaultOption);
                // populate the dropdown with the callsign options
                data.forEach(function (callsign) {
                    var option = document.createElement('option');
                    option.value = callsign;
                    option.text = callsign;
                    select.appendChild(option);
                });
            });;
        });
</script>


