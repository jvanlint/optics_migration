import pytest
from anytree import Node
from anytree.importer import JsonImporter
from django.conf import settings


@pytest.fixture
def authenticated_user(client, django_user_model):
    """Create an authenticated user for a test"""
    username = "Gimble"
    password = "jguitqkjgqi1t17561313k1"
    user = django_user_model.objects.create_user(username=username, password=password)
    # Use this:
    client.force_login(user)
    return user


@pytest.fixture
def full_tree():
    importer = JsonImporter()
    ft = importer.import_(full_tree_data)
    return ft


full_tree_data = '{"id": "root", "text": "", "state": {"opened": true}, "start_time": "2011-06-01T12:00:00+00:00", "type": "root", "children": [{"id": "blue", "state": {"opened": true}, "type": "coalition", "children": [{"id": "USA", "text": "USA", "state": {"opened": true}, "type": "country", "children": [{"id": "A10 Group", "frequency": 251, "task": "CAS", "type": "flight", "children": [{"id": "airframe-1", "unit_type": "A-10C_2", "callsign": "Enfield11", "type": "unit", "state": {"opened": true}, "text": "A10 Group Pilot #1", "onboard_num": "012"}, {"id": "A10 Group-wp-00", "latlng": "41\\u00b055\'42\\"N 41\\u00b052\'13\\"E", "lat": "41\\u00b055\'41.68\\"N", "lon": "41\\u00b052\'13.10\\"E", "waypoint_type": "TakeOffParkingHot", "alt": 0, "ETA": "12:00:00", "type": "waypoint", "action": "FromParkingAreaHot", "text": "wp 0 - From Parking Area Hot"}, {"id": "A10 Group-wp-01", "latlng": "41\\u00b054\'52\\"N 41\\u00b046\'51\\"E", "lat": "41\\u00b054\'52.07\\"N", "lon": "41\\u00b046\'50.75\\"E", "waypoint_type": "Turning Point", "alt": 300, "ETA": "12:00:00", "type": "waypoint", "action": "TurningPoint", "text": "wp 1 - Turning Point"}, {"id": "A10 Group-wp-02", "latlng": "41\\u00b039\'39\\"N 41\\u00b032\'01\\"E", "lat": "41\\u00b039\'39.10\\"N", "lon": "41\\u00b032\'0.93\\"E", "waypoint_type": "Turning Point", "alt": 300, "ETA": "12:00:00", "type": "waypoint", "action": "TurningPoint", "text": "wp 2 - Turning Point"}, {"id": "A10 Group-wp-03", "latlng": "41\\u00b037\'03\\"N 41\\u00b036\'48\\"E", "lat": "41\\u00b037\'3.39\\"N", "lon": "41\\u00b036\'47.87\\"E", "waypoint_type": "Turning Point", "alt": 5000, "ETA": "12:00:00", "type": "waypoint", "action": "TurningPoint", "text": "wp 3 - Turning Point"}, {"id": "A10 Group-wp-04", "latlng": "41\\u00b037\'32\\"N 41\\u00b037\'35\\"E", "lat": "41\\u00b037\'32.22\\"N", "lon": "41\\u00b037\'34.90\\"E", "waypoint_type": "Turning Point", "alt": 6000, "ETA": "12:00:00", "type": "waypoint", "action": "TurningPoint", "text": "wp 4 - Turning Point"}, {"id": "A10 Group-wp-05", "latlng": "41\\u00b036\'35\\"N 41\\u00b036\'01\\"E", "lat": "41\\u00b036\'34.55\\"N", "lon": "41\\u00b036\'0.85\\"E", "waypoint_type": "Land", "alt": 0, "ETA": "12:00:00", "type": "waypoint", "action": "Landing", "text": "wp 5 - Landing"}]}, {"id": "F18 Carrier Group", "frequency": 251, "task": "CAP", "type": "flight", "children": [{"id": "airframe-7", "unit_type": "FA-18C_hornet", "callsign": "Colt11", "type": "unit", "state": {"opened": true}, "text": "F18 Carrier Group Pilot #1", "onboard_num": "358"}, {"id": "airframe-8", "unit_type": "FA-18C_hornet", "callsign": "Colt12", "type": "unit", "state": {"opened": true}, "text": "F18 Carrier Group Pilot #2", "onboard_num": "513"}, {"id": "airframe-9", "unit_type": "FA-18C_hornet", "callsign": "Colt13", "type": "unit", "state": {"opened": true}, "text": "F18 Carrier Group Pilot #3", "onboard_num": "347"}, {"id": "airframe-10", "unit_type": "FA-18C_hornet", "callsign": "Colt14", "type": "unit", "state": {"opened": true}, "text": "F18 Carrier Group Pilot #4", "onboard_num": "945"}, {"id": "F18 Carrier Group-wp-00", "latlng": "41\\u00b036\'46\\"N 41\\u00b028\'46\\"E", "lat": "41\\u00b036\'46.48\\"N", "lon": "41\\u00b028\'45.79\\"E", "waypoint_type": "TakeOffParking", "alt": 0, "ETA": "12:00:00", "type": "waypoint", "action": "FromParkingArea", "text": "wp 0 - From Parking Area"}]}, {"id": "Apache Group", "frequency": 127.5, "task": "CAS", "type": "flight", "state": {"opened": true}, "children": [{"id": "airframe-4", "unit_type": "AH-64D_BLK_II", "callsign": "Uzi11", "type": "unit", "state": {"opened": true}, "text": "Apache Group Pilot #1", "onboard_num": "016"}, {"id": "airframe-5", "unit_type": "AH-64D_BLK_II", "callsign": "Uzi12", "type": "unit", "state": {"opened": true}, "text": "Apache Group Pilot #2", "onboard_num": "483"}, {"id": "Apache Group-wp-00", "latlng": "41\\u00b055\'37\\"N 41\\u00b051\'27\\"E", "lat": "41\\u00b055\'37.46\\"N", "lon": "41\\u00b051\'27.19\\"E", "waypoint_type": "TakeOffParking", "alt": 0, "ETA": "12:00:00", "type": "waypoint", "action": "FromParkingArea", "text": "wp 0 - From Parking Area"}, {"id": "Apache Group-wp-01", "latlng": "41\\u00b054\'52\\"N 41\\u00b046\'51\\"E", "lat": "41\\u00b054\'52.07\\"N", "lon": "41\\u00b046\'50.75\\"E", "waypoint_type": "Turning Point", "alt": 300, "ETA": "12:00:00", "type": "waypoint", "action": "TurningPoint", "text": "wp 1 - Turning Point"}]}]}]}, {"id": "red", "state": {"opened": true}, "type": "coalition", "children": [{"id": "RUS", "text": "Russia", "state": {"opened": true}, "type": "country", "children": [{"id": "Su25 attack", "frequency": 251, "task": "CAS", "type": "flight", "children": [{"id": "airframe-18", "unit_type": "Su-25T", "callsign": "Springfield11", "type": "unit", "state": {"opened": true}, "text": "Su25 attack Pilot #1", "onboard_num": "081"}, {"id": "airframe-19", "unit_type": "Su-25T", "callsign": "Springfield12", "type": "unit", "state": {"opened": true}, "text": "Su25 attack Pilot #2", "onboard_num": "016"}, {"id": "Su25 attack-wp-00", "latlng": "42\\u00b051\'40\\"N 41\\u00b007\'30\\"E", "lat": "42\\u00b051\'39.93\\"N", "lon": "41\\u00b007\'30.00\\"E", "waypoint_type": "TakeOff", "alt": 0, "ETA": "12:00:00", "type": "waypoint", "action": "FromRunway", "text": "wp 0 - From Runway"}, {"id": "Su25 attack-wp-01", "latlng": "42\\u00b053\'53\\"N 41\\u00b003\'17\\"E", "lat": "42\\u00b053\'52.96\\"N", "lon": "41\\u00b003\'16.64\\"E", "waypoint_type": "Turning Point", "alt": 300, "ETA": "12:00:00", "type": "waypoint", "action": "TurningPoint", "text": "wp 1 - Turning Point"}, {"id": "Su25 attack-wp-02", "latlng": "42\\u00b013\'22\\"N 42\\u00b010\'46\\"E", "lat": "42\\u00b013\'21.72\\"N", "lon": "42\\u00b010\'45.86\\"E", "waypoint_type": "Turning Point", "alt": 3000, "ETA": "12:00:00", "type": "waypoint", "action": "TurningPoint", "text": "wp 2 - Turning Point"}, {"id": "Su25 attack-wp-03", "latlng": "42\\u00b018\'42\\"N 42\\u00b011\'33\\"E", "lat": "42\\u00b018\'41.78\\"N", "lon": "42\\u00b011\'32.73\\"E", "waypoint_type": "Turning Point", "alt": 3000, "ETA": "12:00:00", "type": "waypoint", "action": "TurningPoint", "text": "wp 3 - Turning Point"}, {"id": "Su25 attack-wp-04", "latlng": "42\\u00b053\'53\\"N 41\\u00b003\'17\\"E", "lat": "42\\u00b053\'52.96\\"N", "lon": "41\\u00b003\'16.64\\"E", "waypoint_type": "Turning Point", "alt": 300, "ETA": "12:00:00", "type": "waypoint", "action": "TurningPoint", "text": "wp 4 - Turning Point"}, {"id": "Su25 attack-wp-05", "latlng": "42\\u00b051\'40\\"N 41\\u00b007\'30\\"E", "lat": "42\\u00b051\'39.93\\"N", "lon": "41\\u00b007\'30.00\\"E", "waypoint_type": "Land", "alt": 0, "ETA": "12:00:00", "type": "waypoint", "action": "Landing", "text": "wp 5 - Landing"}]}]}]}]}'
